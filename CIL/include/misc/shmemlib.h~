/*
 * filename : shmemlib.h
 * author   : Takahiro Sugiyama
 * date     : 1993/09/13
 */



#ifndef __shmemlib_h
#define __shmemlib_h



#include "comacros.h"



/*==================================================================*
 * shmemnew  : キーで指定されたサイズの領域を共有メモリで確保する。
 * shmemfree : キーを持つ共有メモリを開放する。
 *==================================================================*/
char *shmemnew /* メモリポインタ */
  P2 (( long, key  ), /* キー   */
      ( long, size )) /* サイズ */

void shmemfree
  P1 (( long, key ))  /* キー */



/*=============================================================*
 * shmemget : キーで指定された共有メモリのポインタを獲得する。
 *=============================================================*/
char *shmemget
  P1 (( long, key ))  /* キー */



/*=================================*
 * shmeminfoRec : 共有メモリの情報
 *=================================*/
typedef struct {
  long id;		/* 共有メモリで使用するＩＤ */
  long key;		/* キーの整数値 	    */
  char mode[12];	/* モード		    */
  char owner[12];	/* 持ち主		    */
  char group[12];	/* グループ名		    */
  long attach;		/* 参照されてる数	    */
  long size;		/* 共有メモリのサイズ	    */
  char atime[9];	/* アタッチ時間		    */
  char dtime[9];	/* デタッチ時間		    */
  char ctime[9];	/* 作成時間		    */
} shmeminfoRec;



/*============================================================*
 * shmemgetinfo : キーで指定された共有メモリの情報を獲得する。
 *============================================================*/
long shmemgetinfo /* 情報が獲得できたかどうかの真理値 */
  P2 (( long          , key ),  /* キー       */
      ( shmeminfoRec *, info )) /* 情報が入る */



/*==============================================*
 * shmemgetlist : 共有メモリの情報を取ってくる。
 *==============================================*/
long shmemgetlist
  P1 (( shmeminfoRec *, list ))



#endif  __shmemlib_h
